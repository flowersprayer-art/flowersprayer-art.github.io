<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>甜甜的小世界</title>
  <!-- 引入外部资源 -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
  
  <!-- 配置Tailwind -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            sweetPink: '#FFD1DC',    // 浅粉色
            sweetYellow: '#FFFACD',  // 奶油黄
            sweetPurple: '#E6E6FA',  // 浅紫
            sweetOrange: '#FFE4B5',  // 浅橙
          },
          fontFamily: {
            nunito: ['Nunito', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .card-shadow {
        box-shadow: 0 5px 15px rgba(255, 105, 180, 0.1);
      }
      .hover-lift {
        transition: transform 0.3s ease;
      }
      .hover-lift:hover {
        transform: translateY(-5px) scale(1.02);
      }
      .form-input {
        @apply w-full px-4 py-2 rounded-lg border border-pink-200 focus:outline-none focus:ring-2 focus:ring-pink-300 transition-all;
      }
      .action-btn {
        @apply p-2 rounded-full hover:bg-sweetPink/50 transition-colors;
      }
    }
  </style>
</head>

<body class="font-nunito bg-sweetPink/30 min-h-screen">
  <!-- 导航栏 -->
  <nav class="bg-white/80 backdrop-blur-sm sticky top-0 z-50 shadow-sm">
    <div class="container mx-auto px-4 py-3">
      <div class="flex justify-between items-center">
        <h1 class="text-2xl font-bold text-pink-500 flex items-center">
          <i class="fa fa-birthday-cake mr-2"></i>甜甜的小世界
        </h1>
        
        <!-- 分类导航 -->
        <div class="flex flex-wrap gap-3">
          <button class="category-btn bg-sweetPink text-pink-600 px-4 py-2 rounded-full text-sm font-medium active">
            全部
          </button>
          <button class="category-btn bg-white text-gray-600 px-4 py-2 rounded-full text-sm font-medium hover:bg-sweetPink/50">
            甜品 <i class="fa fa-birthday-cake ml-1"></i>
          </button>
          <button class="category-btn bg-white text-gray-600 px-4 py-2 rounded-full text-sm font-medium hover:bg-sweetPink/50">
            芭菲 <i class="fa fa-ice-cream ml-1"></i>
          </button>
          <button class="category-btn bg-white text-gray-600 px-4 py-2 rounded-full text-sm font-medium hover:bg-sweetPink/50">
            饮料 <i class="fa fa-coffee ml-1"></i>
          </button>
          <button class="category-btn bg-white text-gray-600 px-4 py-2 rounded-full text-sm font-medium hover:bg-sweetPink/50">
            料理 <i class="fa fa-utensils ml-1"></i>
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- 主内容区 -->
  <main class="container mx-auto px-4 py-8">
    <!-- 标题 -->
    <div class="text-center mb-8">
      <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-pink-600">
        今日推荐 <span class="text-orange-400">甜蜜菜单</span>
      </h2>
      <p class="text-gray-500 mt-2">每一口都是幸福的味道～</p>
    </div>

    <!-- 添加菜单按钮 -->
    <div class="text-center mb-8">
      <button id="add-menu-btn" class="bg-pink-500 hover:bg-pink-600 text-white px-6 py-3 rounded-full font-medium shadow-md hover:shadow-lg transition-all flex items-center mx-auto">
        <i class="fa fa-plus-circle mr-2"></i> 添加新菜品
      </button>
    </div>

    <!-- 菜单表单（添加/编辑共用） -->
    <div id="menu-form-container" class="bg-white rounded-2xl p-6 mb-10 card-shadow hidden">
      <h3 id="form-title" class="text-xl font-bold text-pink-600 mb-4 flex items-center">
        <i class="fa fa-pencil-square-o mr-2"></i> 新增菜品信息
      </h3>
      <form id="menu-form" class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <input type="hidden" id="edit-id"> <!-- 用于存储编辑的菜品索引 -->
        <div>
          <label class="block text-gray-600 mb-1 text-sm">菜品名称 <span class="text-pink-500">*</span></label>
          <input type="text" id="name" class="form-input" placeholder="例如：草莓慕斯" required>
        </div>
        <div>
          <label class="block text-gray-600 mb-1 text-sm">分类 <span class="text-pink-500">*</span></label>
          <select id="category" class="form-input" required>
            <option value="">请选择分类</option>
            <option value="甜品">甜品</option>
            <option value="芭菲">芭菲</option>
            <option value="饮料">饮料</option>
            <option value="料理">料理</option>
          </select>
        </div>
        <div>
          <label class="block text-gray-600 mb-1 text-sm">图片地址 <span class="text-pink-500">*</span></label>
          <input type="url" id="img" class="form-input" placeholder="例如：https://xxx.com/cake.jpg" required>
        </div>
        <div>
          <label class="block text-gray-600 mb-1 text-sm">描述</label>
          <input type="text" id="desc" class="form-input" placeholder="例如：新鲜草莓制作，口感绵密">
        </div>
        <div class="md:col-span-2 flex justify-end gap-3 mt-2">
          <button type="button" id="cancel-btn" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50 transition-colors">
            取消
          </button>
          <button type="submit" class="px-6 py-2 bg-sweetPink text-pink-700 rounded-lg hover:bg-pink-200 transition-colors font-medium">
            保存菜品
          </button>
        </div>
      </form>
    </div>

    <!-- 产品展示区 -->
    <div id="product-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
      <!-- 产品卡片会通过JS动态生成 -->
    </div>
  </main>

  <!-- 页脚 -->
  <footer class="bg-white mt-12 py-6">
    <div class="container mx-auto px-4 text-center text-gray-500 text-sm">
      <p>甜甜的小世界 © 2023 | 用美味治愈一切</p>
      <div class="flex justify-center gap-4 mt-3">
        <i class="fa fa-instagram text-pink-400"></i>
        <i class="fa fa-weibo text-pink-400"></i>
        <i class="fa fa-wechat text-pink-400"></i>
      </div>
    </div>
  </footer>

  <script>
    // 模拟产品数据（添加id用于编辑删除）
    let products = [
      { id: 1, name: "草莓奶油蛋糕", category: "甜品", img: "https://picsum.photos/seed/cake1/300/300", desc: "新鲜草莓+动物奶油" },
      { id: 2, name: "芒果芭菲", category: "芭菲", img: "https://picsum.photos/seed/parfait1/300/300", desc: "多层芒果+酸奶慕斯" },
      { id: 3, name: "樱花气泡水", category: "饮料", img: "https://picsum.photos/seed/drink1/300/300", desc: "春日限定樱花味" },
      { id: 4, name: "玉子烧", category: "料理", img: "https://picsum.photos/seed/food1/300/300", desc: "日式甜味玉子烧" },
      { id: 5, name: "马卡龙礼盒", category: "甜品", img: "https://picsum.photos/seed/cake2/300/300", desc: "6枚装彩虹马卡龙" },
      { id: 6, name: "抹茶芭菲", category: "芭菲", img: "https://picsum.photos/seed/parfait2/300/300", desc: "宇治抹茶+红豆" },
    ];

    // DOM元素
    const productContainer = document.getElementById('product-container');
    const addMenuBtn = document.getElementById('add-menu-btn');
    const menuFormContainer = document.getElementById('menu-form-container');
    const menuForm = document.getElementById('menu-form');
    const cancelBtn = document.getElementById('cancel-btn');
    const formTitle = document.getElementById('form-title');
    const editIdInput = document.getElementById('edit-id');
    const categoryBtns = document.querySelectorAll('.category-btn');
    let currentCategory = '全部'; // 记录当前选中的分类

    // 渲染产品卡片
    function renderProducts(items) {
      productContainer.innerHTML = '';
      items.forEach((item, index) => {
        const card = document.createElement('div');
        card.className = 'bg-white rounded-2xl overflow-hidden card-shadow hover-lift';
        card.innerHTML = `
          <img src="${item.img}" alt="${item.name}" class="w-full h-48 object-cover">
          <div class="p-4">
            <div class="flex justify-between items-center mb-2">
              <h3 class="font-bold text-pink-600">${item.name}</h3>
              <span class="text-xs bg-sweetOrange px-2 py-1 rounded-full text-orange-700">${item.category}</span>
            </div>
            <p class="text-gray-500 text-sm mb-3">${item.desc}</p>
            <div class="flex justify-between">
              <button class="action-btn edit-btn text-pink-600" data-index="${index}">
                <i class="fa fa-pencil"></i> 编辑
              </button>
              <button class="action-btn delete-btn text-red-400" data-index="${index}">
                <i class="fa fa-trash"></i> 删除
              </button>
            </div>
          </div>
        `;
        productContainer.appendChild(card);
      });

      // 绑定编辑和删除按钮事件
      document.querySelectorAll('.edit-btn').forEach(btn => {
        btn.addEventListener('click', handleEdit);
      });
      document.querySelectorAll('.delete-btn').forEach(btn => {
        btn.addEventListener('click', handleDelete);
      });
    }

    // 初始渲染
    renderProducts(products);

    // 显示表单（区分添加和编辑）
    function showForm(isEdit = false, index = -1) {
      menuFormContainer.classList.remove('hidden');
      if (isEdit && index !== -1) {
        // 编辑模式
        formTitle.innerHTML = '<i class="fa fa-pencil mr-2"></i> 编辑菜品信息';
        const item = products[index];
        editIdInput.value = index;
        document.getElementById('name').value = item.name;
        document.getElementById('category').value = item.category;
        document.getElementById('img').value = item.img;
        document.getElementById('desc').value = item.desc;
      } else {
        // 添加模式
        formTitle.innerHTML = '<i class="fa fa-plus mr-2"></i> 新增菜品信息';
        menuForm.reset();
        editIdInput.value = '';
      }
      // 滚动到表单位置
      menuFormContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // 隐藏表单
    function hideForm() {
      menuFormContainer.classList.add('hidden');
      menuForm.reset();
      editIdInput.value = '';
    }

    // 处理添加按钮点击
    addMenuBtn.addEventListener('click', () => {
      showForm(false);
    });

    // 处理取消按钮
    cancelBtn.addEventListener('click', hideForm);

    // 处理表单提交（添加/编辑共用）
    menuForm.addEventListener('submit', (e) => {
      e.preventDefault();
      
      const formData = {
        name: document.getElementById('name').value,
        category: document.getElementById('category').value,
        img: document.getElementById('img').value,
        desc: document.getElementById('desc').value || '暂无描述',
        id: Date.now() // 用时间戳作为唯一id
      };

      const editIndex = editIdInput.value;
      if (editIndex !== '') {
        // 编辑模式：更新现有菜品
        formData.id = products[editIndex].id; // 保留原id
        products[editIndex] = formData;
      } else {
        // 添加模式：新增菜品
        products.push(formData);
      }

      // 重新渲染当前分类
      filterByCategory(currentCategory);
      hideForm();
      
      // 显示提示
      alert(editIndex !== '' ? '菜品编辑成功！' : '新菜品添加成功！');
    });

    // 处理编辑按钮
    function handleEdit(e) {
      const index = parseInt(e.currentTarget.dataset.index);
      showForm(true, index);
    }

    // 处理删除按钮
    function handleDelete(e) {
      const index = parseInt(e.currentTarget.dataset.index);
      if (confirm(`确定要删除"${products[index].name}"吗？`)) {
        products.splice(index, 1); // 从数组中删除
        filterByCategory(currentCategory); // 重新渲染
      }
    }

    // 按分类筛选
    function filterByCategory(category) {
      currentCategory = category;
      if (category === '全部') {
        renderProducts(products);
      } else {
        const filtered = products.filter(p => p.category === category);
        renderProducts(filtered);
      }
    }

    // 分类切换逻辑
    categoryBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        // 切换按钮样式
        categoryBtns.forEach(b => {
          b.classList.remove('active', 'bg-sweetPink', 'text-pink-600');
          b.classList.add('bg-white', 'text-gray-600');
        });
        btn.classList.add('active', 'bg-sweetPink', 'text-pink-600');
        btn.classList.remove('bg-white', 'text-gray-600');
        
        // 筛选对应分类
        const category = btn.textContent.trim().split(' ')[0];
        filterByCategory(category);
      });
    });
  </script>
</body>
</html>
